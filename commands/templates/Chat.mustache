'use strict'
const Route = use('Route')

module.exports = Route.group(() => {

    /**
    * @api {post} /chat/getToken Get token
    * @apiGroup Chat
    *
    * @apiPermission JWT
    * @apiParam {string} deviceId something that twilio wants, anything
    *
    * @apiDescription Get token to access twilio chat
    *
    */
    Route.post('/getToken', 'ChatController.getToken').middleware(['getUser'])

    /**
    * @api {get} /chat/:sid/actions Get Actions that can be performed by user
    * @apiGroup Chat
    *
    * @apiPermission JWT
    *
    * @apiDescription Get Actions that can be performed by user
    *
    */
    Route.get('/:sid/actions', 'ChatController.getPossibleActions').middleware(['getUser'])

    /**
    * @api {post} /chat/create Create chat
    * @apiGroup Chat
    *
    * @apiPermission JWT
    * @apiParam {string} name Chat's name (rule: required|string)
    * @apiParam {number[]} users Ids of users to add, not including creator
    * @apiParam {string} type Chat type (rule: required|in:private,public)
    * @apiParam {string} additional Additional data for chat (rule: string)
    *
    * @apiDescription Create a new chat
    *
    */
    Route.post('/create', 'ChatController.createChat').middleware(['getUser'])

    /**
    * @api {post} /chat/:sid/video Add video
    * @apiGroup Chat
    *
    * @apiPermission JWT
    * @apiParam {string} sid Sid of chat
    *
    * @apiDescription Add video to chat
    *
    */
    Route.post('/:sid/video', 'ChatController.addVideo').middleware(['getUser'])

    /**
    * @api {delete} /chat/:sid/video Remove video
    * @apiGroup Chat
    *
    * @apiPermission JWT
    * @apiParam {string} sid Sid of chat
    *
    * @apiDescription Remove video call from chat
    *
    */
    Route.delete('/:sid/video', 'ChatController.removeVideo').middleware(['getUser'])

})